{"ast":null,"code":"import _classCallCheck from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\src\\\\components\\\\orders\\\\pages\\\\NewOrder.jsx\";\nimport React from 'react';\nimport ProductsTable from './sections/ProductsTable';\nimport OrderDetails from './sections/OrderDetails';\nimport { MDBRow } from 'mdbreact';\n\nvar NewOrder =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NewOrder, _React$Component);\n\n  function NewOrder() {\n    var _this;\n\n    _classCallCheck(this, NewOrder);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewOrder).call(this));\n\n    _this.addProductToTbl = function (pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked, order_id) {\n      _this.refs.productsTable.addProductToTbl(pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked);\n    };\n\n    _this.deleteProductFrmTbl = function (price, i, pChecked) {\n      _this.refs.orderDetails.minusTotalValue(price);\n\n      if (pChecked === 'Yes') {\n        _this.refs.orderDetails.minusTotalValueAdded(price);\n      }\n\n      var table = document.getElementById('productsTable');\n      table.deleteRow(i);\n\n      if (table.rows.length === 1) {\n        document.getElementById('pTableCard').style.display = 'none';\n\n        _this.refs.productsTable.setState({\n          submitOrderBtn: false\n        });\n      }\n    };\n\n    _this.checkOrderDetailsValidity = function () {\n      var orderDetailsValidity = _this.refs.orderDetails.orderDetailsValidity();\n\n      if (_this.orderForm.checkValidity() === false) {\n        _this.orderForm.classList.add('was-validated');\n\n        return false;\n      } else if (!orderDetailsValidity) {\n        return false;\n      } else if (_this.customerForm.checkValidity() === false) {\n        _this.customerForm.classList.add('was-validated');\n\n        return false;\n      } else {\n        return true;\n      }\n    };\n\n    _this.saveOrderDetailsToDB = function (pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked) {\n      var orderDate = _this.refs.orderDetails.state.orderDate;\n      var orderId = _this.orderId.value;\n      var orderDetail = {\n        order_id: orderId,\n        order_date: orderDate,\n        pName: pName,\n        pSKU: pSKU,\n        pRate: pRate,\n        pQTY: pQTY,\n        pPrice: pPrice,\n        pRemarks: pRemarks,\n        pChecked: pChecked\n      };\n      var options = {\n        method: 'POST',\n        body: JSON.stringify(orderDetail),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      fetch('/addNewOrderDetails', options).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        console.log(json);\n      })[\"catch\"](function (error) {\n        return console.log(error);\n      });\n    };\n\n    _this.saveOrderToDB = function () {\n      _this.refs.orderDetails.saveOrderToDB();\n    };\n\n    _this.minusFromTotal = function (pPrice) {\n      _this.refs.orderDetails.minusTotalValue(pPrice);\n    };\n\n    _this.addToTotal = function (pPrice) {\n      _this.refs.orderDetails.addTotalValue(pPrice);\n    };\n\n    _this.minusFromTotalValueAdded = function (pPrice) {\n      _this.refs.orderDetails.minusTotalValueAdded(pPrice);\n    };\n\n    _this.addToTotalValueAdded = function (pPrice) {\n      _this.refs.orderDetails.addTotalValueAdded(pPrice);\n    };\n\n    _this.state = {\n      showOrderDetails: false\n    };\n    _this.addProductToTbl = _this.addProductToTbl.bind(_assertThisInitialized(_this));\n    _this.deleteProductFrmTbl = _this.deleteProductFrmTbl.bind(_assertThisInitialized(_this));\n    _this.saveOrderDetailsToDB = _this.saveOrderDetailsToDB.bind(_assertThisInitialized(_this));\n    _this.saveOrderToDB = _this.saveOrderToDB.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(NewOrder, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(MDBRow, {\n        style: {\n          marginTop: '78px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(OrderDetails, {\n        ref: \"orderDetails\",\n        orderForm: function orderForm(el) {\n          return _this2.orderForm = el;\n        },\n        customerForm: function customerForm(el) {\n          return _this2.customerForm = el;\n        },\n        addProductToTbl: this.addProductToTbl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      })), React.createElement(MDBRow, {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(ProductsTable, {\n        ref: \"productsTable\",\n        refreshOrdersTable: this.refreshOrdersTable,\n        deleteProductFrmTbl: this.deleteProductFrmTbl,\n        saveOrderDetailsToDB: this.saveOrderDetailsToDB,\n        saveOrderToDB: this.saveOrderToDB,\n        checkOrderDetailsValidity: this.checkOrderDetailsValidity,\n        productsTable: function productsTable(el) {\n          return _this2.productsTable = el;\n        },\n        minusFromTotal: this.minusFromTotal,\n        addToTotal: this.addToTotal,\n        minusFromTotalValueAdded: this.minusFromTotalValueAdded,\n        addToTotalValueAdded: this.addToTotalValueAdded,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return NewOrder;\n}(React.Component);\n\nexport default NewOrder;","map":{"version":3,"sources":["d:\\mzamal\\sales&stock\\sales\\src\\components\\orders\\pages\\NewOrder.jsx"],"names":["React","ProductsTable","OrderDetails","MDBRow","NewOrder","addProductToTbl","pName","pSKU","pRate","pQTY","pPrice","pRemarks","pChecked","order_id","refs","productsTable","deleteProductFrmTbl","price","i","orderDetails","minusTotalValue","minusTotalValueAdded","table","document","getElementById","deleteRow","rows","length","style","display","setState","submitOrderBtn","checkOrderDetailsValidity","orderDetailsValidity","orderForm","checkValidity","classList","add","customerForm","saveOrderDetailsToDB","orderDate","state","orderId","value","orderDetail","order_date","options","method","body","JSON","stringify","headers","fetch","then","res","json","console","log","error","saveOrderToDB","minusFromTotal","addToTotal","addTotalValue","minusFromTotalValueAdded","addToTotalValueAdded","addTotalValueAdded","showOrderDetails","bind","marginTop","el","refreshOrdersTable","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ProductsTable from './sections/ProductsTable';\nimport OrderDetails from './sections/OrderDetails';\nimport { MDBRow } from 'mdbreact';\n\n\nclass NewOrder extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      showOrderDetails: false\n    };\n    this.addProductToTbl = this.addProductToTbl.bind(this);\n    this.deleteProductFrmTbl = this.deleteProductFrmTbl.bind(this);\n    this.saveOrderDetailsToDB = this.saveOrderDetailsToDB.bind(this);\n    this.saveOrderToDB = this.saveOrderToDB.bind(this);\n  }\n\n  addProductToTbl = (pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked,order_id ) => {\n    this.refs.productsTable.addProductToTbl(pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked);\n  }\n\n  deleteProductFrmTbl = (price, i, pChecked) => {\n\n    this.refs.orderDetails.minusTotalValue(price);\n    if (pChecked === 'Yes') {\n      this.refs.orderDetails.minusTotalValueAdded(price);\n    }\n    let table = document.getElementById('productsTable');\n    table.deleteRow(i);\n    if (table.rows.length === 1) {\n      document.getElementById('pTableCard').style.display = 'none'\n      this.refs.productsTable.setState({ submitOrderBtn: false })\n    }\n  }\n\n  checkOrderDetailsValidity = () => {\n    var orderDetailsValidity = this.refs.orderDetails.orderDetailsValidity();\n    if (this.orderForm.checkValidity() === false) {\n      this.orderForm.classList.add('was-validated');\n      return false;\n    }\n    else if (!orderDetailsValidity) {\n      return false;\n    }\n    else if (this.customerForm.checkValidity() === false) {\n      this.customerForm.classList.add('was-validated');\n      return false;\n    }\n    else {\n      return true;\n    }\n\n  }\n\n  saveOrderDetailsToDB = (pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked) => {\n    let orderDate = this.refs.orderDetails.state.orderDate\n\n    let orderId = this.orderId.value;\n    let orderDetail = { order_id: orderId, order_date: orderDate, pName: pName, pSKU: pSKU, pRate: pRate, pQTY: pQTY, pPrice: pPrice, pRemarks: pRemarks, pChecked: pChecked }\n    var options = {\n      method: 'POST',\n      body: JSON.stringify(orderDetail),\n      headers: { 'Content-Type': 'application/json' }\n    }\n    fetch('/addNewOrderDetails', options)\n      .then((res) => res.json())\n      .then((json) => {\n        console.log(json)\n      })\n      .catch((error) => console.log(error))\n  }\n\n  saveOrderToDB = () => {\n    this.refs.orderDetails.saveOrderToDB();\n  }\n\n  minusFromTotal = (pPrice) => {\n    this.refs.orderDetails.minusTotalValue(pPrice)\n  }\n  addToTotal = (pPrice) => {\n    this.refs.orderDetails.addTotalValue(pPrice)\n  }\n  minusFromTotalValueAdded = (pPrice) => {\n    this.refs.orderDetails.minusTotalValueAdded(pPrice);\n  }\n  addToTotalValueAdded = (pPrice) => {\n    this.refs.orderDetails.addTotalValueAdded(pPrice);\n  }\n\n  render() {\n\n    return (\n      <React.Fragment>\n\n        <MDBRow style={{ marginTop: '78px' }}>\n          {/* {this.state.showOrderDetails ? */}\n          <OrderDetails\n            ref='orderDetails'\n            orderForm={el => (this.orderForm = el)}\n            customerForm={el => (this.customerForm = el)}\n            addProductToTbl={this.addProductToTbl}\n          />\n          {/* : null} */}\n        </MDBRow>\n        <MDBRow className='mt-3'>\n          <ProductsTable\n            ref='productsTable'\n            refreshOrdersTable={this.refreshOrdersTable}\n            deleteProductFrmTbl={this.deleteProductFrmTbl}\n            saveOrderDetailsToDB={this.saveOrderDetailsToDB}\n            saveOrderToDB={this.saveOrderToDB}\n            checkOrderDetailsValidity={this.checkOrderDetailsValidity}\n            productsTable={el => (this.productsTable = el)}\n            minusFromTotal={this.minusFromTotal}\n            addToTotal={this.addToTotal}\n            minusFromTotalValueAdded={this.minusFromTotalValueAdded}\n            addToTotalValueAdded={this.addToTotalValueAdded}\n          />\n        </MDBRow>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default NewOrder;"]},"metadata":{},"sourceType":"module"}