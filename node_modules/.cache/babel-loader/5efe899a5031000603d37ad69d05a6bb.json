{"ast":null,"code":"import _objectSpread from \"D:\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"D:\\\\sales&stock\\\\sales\\\\src\\\\components\\\\pages\\\\sections\\\\EditUserModal.jsx\";\nimport React, { Component } from 'react';\nimport { MDBContainer, MDBBtn, MDBModal, MDBModalBody, MDBCard, MDBCardBody, MDBModalHeader, MDBModalFooter, MDBRow, MDBCol, MDBInput } from 'mdbreact';\nimport Select from 'react-select';\n\nclass EditOrderModal extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.fetchData = id => {\n      this._isMounted = true;\n      fetch('/getSpecificUser/' + id).then(res => res.json()).then(json => {\n        console.log(json);\n        var user = json.data;\n\n        if (this._isMounted === true) {\n          this.setState({\n            user: user,\n            userId: user.id,\n            role_id: user.role_id,\n            name: user.name,\n            email: user.email,\n            cell: user.cell,\n            username: user.username,\n            password: user.password\n          });\n        }\n      }).catch(error => console.log(error));\n      fetch('/getAllRoles').then(res => res.json()).then(json => {\n        console.log(json);\n\n        if (this._isMounted) {\n          this.setState({\n            roles: json.data\n          });\n        }\n\n        this.setRoleOptions(json.data);\n      }).catch(error => console.log(error));\n    };\n\n    this.componentWillUnmount = () => {\n      this._isMounted = false;\n    };\n\n    this.toggle = () => {\n      this.setState({\n        modalShow: !this.state.modalShow\n      });\n    };\n\n    this.setRoleOptions = roles => {\n      roleOptions = roles.map(role => ({\n        key: role.id,\n        label: role.name,\n        value: role.id\n      }));\n      roles.forEach(role => {\n        console.log(role.id);\n        console.log(role.name);\n        console.log(role_id);\n\n        if (role.id.toString() === role_id) {\n          console.log('ok');\n          this.setState({\n            role: role.name\n          }); // currentRole = { label: role.name, value: role.name }\n        }\n      });\n      this.setState({\n        roleOptionsrole: currentRole\n      });\n    };\n\n    this.handleInput = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSelectChange = selectedOption => {\n      if (selectedOption === null) {\n        this.setState({\n          orderSource: selectedOption,\n          isValidSource: false\n        });\n      } else {\n        this.setState({\n          orderSource: selectedOption,\n          isValidSource: true\n        });\n      }\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      let form = this.refs.updateUserForm;\n\n      if (form.checkValidity() === false) {\n        form.classList.add('was-validated');\n      } else if (this.state.role === '' || this.state.role === null) {\n        this.setState({\n          role: null\n        });\n        return;\n      } else {\n        let name = this.state.name;\n        let email = this.state.email;\n        let cell = this.state.cell;\n        let username = this.state.username;\n        let password = this.state.password;\n        let role = this.state.role.value;\n        console.log(name, email, cell, username, password, role);\n        let user = {\n          name: name,\n          email: email,\n          cell: cell,\n          username: username,\n          password: password,\n          role: role\n        };\n        var options = {\n          method: 'POST',\n          body: JSON.stringify(user),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        };\n        fetch('/addNewUser', options).then(res => res.json()).then(json => {\n          console.log(json);\n\n          if (this._isMounted = true) {\n            this.setState({\n              message: json.message,\n              notificationShow: true\n            });\n          }\n\n          if (json.success) {\n            this.setState({\n              role: '',\n              name: '',\n              email: '',\n              cell: '',\n              username: '',\n              password: ''\n            });\n          } else {\n            this.username.focus();\n          }\n\n          if (this._isMounted) {\n            setTimeout(() => this.setState({\n              notificationShow: false\n            }), 1502);\n          }\n        }).catch(error => console.log(error));\n      }\n    };\n\n    this.state = {\n      modalShow: false,\n      userId: '',\n      role_id: '',\n      role: '',\n      name: '',\n      email: '',\n      cell: '',\n      username: '',\n      password: '',\n      roles: '',\n      roleOptions: [] // this.deleteProduct = this.deleteProduct.bind(this);\n\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          role = _this$state.role,\n          role_id = _this$state.role_id,\n          roles = _this$state.roles;\n    const customStyles = {\n      control: (base, state) => _objectSpread({}, base, {\n        borderColor: state.isFocused ? '#ddd' : role !== null ? '#ddd' : 'red',\n        width: '191px'\n      })\n    };\n    var roleOptions;\n    var currentRole;\n\n    if (roles !== '' && roles !== null && roles !== undefined) {}\n\n    console.log(currentRole);\n    return React.createElement(MDBContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(MDBModal, {\n      isOpen: this.state.modalShow,\n      toggle: this.toggle,\n      size: \"lg\",\n      centered: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(MDBModalHeader, {\n      toggle: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Edit User Details\"), React.createElement(MDBModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(MDBCard, {\n      className: \" p-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(MDBCardBody, {\n      className: \"p-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      ref: \"updateUserForm\",\n      onSubmit: this.handleSubmit,\n      noValidate: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"grey-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(MDBInput, {\n      onInput: this.handleInput,\n      value: this.state.name,\n      label: \"Name\",\n      name: \"name\",\n      icon: \"user\",\n      group: true,\n      type: \"text\",\n      validate: true,\n      error: \"wrong\",\n      success: \"right\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      onInput: this.handleInput,\n      value: this.state.email,\n      label: \"Email\",\n      name: \"email\",\n      icon: \"envelope\",\n      group: true,\n      type: \"email\",\n      validate: true,\n      error: \"wrong\",\n      success: \"right\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      onInput: this.handleInput,\n      value: this.state.cell,\n      label: \"Phone\",\n      name: \"cell\",\n      icon: \"phone\",\n      group: true,\n      type: \"text\",\n      validate: true,\n      error: \"wrong\",\n      success: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      onInput: this.handleInput,\n      value: this.state.username,\n      label: \"Username\",\n      name: \"username\",\n      inputRef: el => {\n        this.username = el;\n      },\n      icon: \"user\",\n      group: true,\n      type: \"text\",\n      validate: true,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      onInput: this.handleInput,\n      value: this.state.password,\n      label: \"Password\",\n      name: \"password\",\n      icon: \"lock\",\n      group: true,\n      type: \"text\",\n      validate: true,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(Select, {\n      styles: customStyles,\n      defaultValue: currentRole,\n      value: this.state.role,\n      onChange: this.handleSelectChange,\n      options: roleOptions,\n      placeholder: \"Role\",\n      isSearchable: true,\n      isClearable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(MDBBtn, {\n      size: \"sm\",\n      className: \"px-2 font-weight-bold\",\n      color: \"secondary\",\n      onClick: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, \"Close\"), React.createElement(MDBBtn, {\n      size: \"sm\",\n      className: \"px-2 font-weight-bold\",\n      onClick: this.handleSubmit,\n      outline: true,\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, \"Save updates\")))))), React.createElement(MDBModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default EditOrderModal;","map":{"version":3,"sources":["D:\\sales&stock\\sales\\src\\components\\pages\\sections\\EditUserModal.jsx"],"names":["React","Component","MDBContainer","MDBBtn","MDBModal","MDBModalBody","MDBCard","MDBCardBody","MDBModalHeader","MDBModalFooter","MDBRow","MDBCol","MDBInput","Select","EditOrderModal","constructor","props","_isMounted","fetchData","id","fetch","then","res","json","console","log","user","data","setState","userId","role_id","name","email","cell","username","password","catch","error","roles","setRoleOptions","componentWillUnmount","toggle","modalShow","state","roleOptions","map","role","key","label","value","forEach","toString","roleOptionsrole","currentRole","handleInput","e","target","handleSelectChange","selectedOption","orderSource","isValidSource","handleSubmit","preventDefault","form","refs","updateUserForm","checkValidity","classList","add","options","method","body","JSON","stringify","headers","message","notificationShow","success","focus","setTimeout","render","customStyles","control","base","borderColor","isFocused","width","undefined","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { MDBContainer, MDBBtn, MDBModal, MDBModalBody, MDBCard, MDBCardBody, MDBModalHeader, MDBModalFooter, MDBRow, MDBCol, MDBInput } from 'mdbreact';\r\nimport Select from 'react-select';\r\n\r\n\r\n\r\nclass EditOrderModal extends Component {\r\n    _isMounted = false;\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            modalShow: false,\r\n            userId: '',\r\n            role_id: '',\r\n            role: '',\r\n            name: '',\r\n            email: '',\r\n            cell: '',\r\n            username: '',\r\n            password: '',\r\n            roles: '',\r\n            roleOptions: []\r\n        }\r\n        // this.deleteProduct = this.deleteProduct.bind(this);\r\n    }\r\n    fetchData = (id) => {\r\n        this._isMounted = true\r\n        fetch('/getSpecificUser/' + id)\r\n            .then((res) => res.json())\r\n            .then((json) => {\r\n                console.log(json)\r\n                var user = json.data\r\n                if (this._isMounted === true) {\r\n                    this.setState({\r\n                        user: user,\r\n                        userId: user.id,\r\n                        role_id: user.role_id,\r\n                        name: user.name,\r\n                        email: user.email,\r\n                        cell: user.cell,\r\n                        username: user.username,\r\n                        password: user.password,\r\n                    })\r\n                }\r\n            })\r\n            .catch((error) => console.log(error))\r\n        fetch('/getAllRoles')\r\n            .then((res) => res.json())\r\n            .then((json) => {\r\n                console.log(json)\r\n                if (this._isMounted) {\r\n                    this.setState({ roles: json.data })\r\n                }\r\n                this.setRoleOptions(json.data);\r\n            })\r\n            .catch((error) => console.log(error))\r\n\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this._isMounted = false\r\n    }\r\n\r\n    toggle = () => {\r\n        this.setState({\r\n            modalShow: !this.state.modalShow,\r\n\r\n        });\r\n    }\r\n\r\n    setRoleOptions = (roles) => {\r\n        roleOptions = roles.map(role => ({ key: role.id, label: role.name, value: role.id }));\r\n        roles.forEach(role => {\r\n            console.log(role.id);\r\n            console.log(role.name);\r\n            console.log(role_id);\r\n\r\n            if (role.id.toString() === role_id) {\r\n                console.log('ok');\r\n                this.setState({\r\n                    role: role.name\r\n                })\r\n                // currentRole = { label: role.name, value: role.name }\r\n            }\r\n        });\r\n        this.setState({\r\n            roleOptionsrole:currentRole,\r\n        })\r\n    }\r\n\r\n    handleInput = e => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    handleSelectChange = selectedOption => {\r\n        if (selectedOption === null) {\r\n            this.setState({\r\n                orderSource: selectedOption, isValidSource: false\r\n            })\r\n        }\r\n        else {\r\n            this.setState({\r\n                orderSource: selectedOption, isValidSource: true\r\n            })\r\n        }\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        let form = this.refs.updateUserForm\r\n        if (form.checkValidity() === false) {\r\n            form.classList.add('was-validated');\r\n        }\r\n        else if (this.state.role === '' || this.state.role === null) {\r\n            this.setState({ role: null })\r\n            return\r\n        }\r\n        else {\r\n            let name = this.state.name\r\n            let email = this.state.email\r\n            let cell = this.state.cell\r\n            let username = this.state.username\r\n            let password = this.state.password\r\n            let role = this.state.role.value\r\n\r\n            console.log(name, email, cell, username, password, role);\r\n            let user = { name: name, email: email, cell: cell, username: username, password: password, role: role }\r\n\r\n            var options = {\r\n                method: 'POST',\r\n                body: JSON.stringify(user),\r\n                headers: { 'Content-Type': 'application/json' }\r\n            }\r\n            fetch('/addNewUser', options)\r\n                .then((res) => res.json())\r\n                .then((json) => {\r\n                    console.log(json)\r\n                    if (this._isMounted = true) {\r\n                        this.setState({ message: json.message, notificationShow: true })\r\n                    }\r\n                    if (json.success) {\r\n                        this.setState({\r\n                            role: '',\r\n                            name: '',\r\n                            email: '',\r\n                            cell: '',\r\n                            username: '',\r\n                            password: ''\r\n                        })\r\n                    }\r\n                    else {\r\n                        this.username.focus();\r\n                    }\r\n                    if (this._isMounted) {\r\n                        setTimeout(() => this.setState({ notificationShow: false }), 1502);\r\n\r\n                    }\r\n                })\r\n                .catch((error) => console.log(error))\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    render() {\r\n        const { role, role_id, roles } = this.state\r\n        const customStyles = {\r\n            control: (base, state) => ({\r\n                ...base,\r\n                borderColor: state.isFocused ?\r\n                    '#ddd' : role !== null ?\r\n                        '#ddd' : 'red',\r\n                width: '191px',\r\n            })\r\n        }\r\n\r\n        var roleOptions;\r\n        var currentRole;\r\n        if (roles !== '' && roles !== null && roles !== undefined) {\r\n\r\n\r\n        }\r\n        console.log(currentRole);\r\n\r\n\r\n\r\n        return (\r\n            <MDBContainer>\r\n                <MDBModal isOpen={this.state.modalShow} toggle={this.toggle} size='lg' centered>\r\n                    <MDBModalHeader toggle={this.toggle}>Edit User Details</MDBModalHeader>\r\n                    <MDBModalBody>\r\n\r\n                        <MDBCard className=' p-5'>\r\n                            <MDBCardBody className='p-2'>\r\n\r\n                                <form ref='updateUserForm' onSubmit={this.handleSubmit} noValidate>\r\n                                    <div className=\"grey-text\">\r\n                                        <MDBInput\r\n                                            onInput={this.handleInput}\r\n                                            value={this.state.name}\r\n                                            label=\"Name\"\r\n                                            name='name'\r\n                                            icon=\"user\"\r\n                                            group\r\n                                            type=\"text\"\r\n                                            validate\r\n                                            error=\"wrong\"\r\n                                            success=\"right\"\r\n                                            required\r\n                                        />\r\n                                        <MDBInput\r\n                                            onInput={this.handleInput}\r\n                                            value={this.state.email}\r\n                                            label=\"Email\"\r\n                                            name=\"email\"\r\n                                            icon=\"envelope\"\r\n                                            group\r\n                                            type=\"email\"\r\n                                            validate\r\n                                            error=\"wrong\"\r\n                                            success=\"right\"\r\n                                            required\r\n                                        />\r\n                                        <MDBInput\r\n                                            onInput={this.handleInput}\r\n                                            value={this.state.cell}\r\n                                            label=\"Phone\"\r\n                                            name=\"cell\"\r\n                                            icon=\"phone\"\r\n                                            group\r\n                                            type=\"text\"\r\n                                            validate\r\n                                            error=\"wrong\"\r\n                                            success=\"right\"\r\n                                        />\r\n                                        <MDBInput\r\n                                            onInput={this.handleInput}\r\n                                            value={this.state.username}\r\n                                            label=\"Username\"\r\n                                            name=\"username\"\r\n                                            inputRef={el => { this.username = el }}\r\n                                            icon=\"user\"\r\n                                            group\r\n                                            type=\"text\"\r\n                                            validate\r\n                                            required\r\n                                        />\r\n                                        <MDBInput\r\n                                            onInput={this.handleInput}\r\n                                            value={this.state.password}\r\n                                            label=\"Password\"\r\n                                            name=\"password\"\r\n                                            icon=\"lock\"\r\n                                            group\r\n                                            type=\"text\"\r\n                                            validate\r\n                                            required>\r\n                                            {/* <MDBIcon icon=\"home\" style={{ float: 'left' }} /> */}\r\n                                        </MDBInput>\r\n                                        {/* {showOptions ? */}\r\n                                        <div className=''>\r\n                                            <Select\r\n                                                styles={customStyles}\r\n                                                defaultValue={currentRole}\r\n                                                value={this.state.role}\r\n                                                onChange={this.handleSelectChange}\r\n                                                options={roleOptions}\r\n                                                placeholder='Role'\r\n                                                isSearchable\r\n                                                isClearable\r\n                                            />\r\n                                        </div>\r\n                                        {/* : null */}\r\n                                        {/* } */}\r\n                                    </div>\r\n                                    {/* <MDBBtn size='sm' color=\"teal\" outline type='submit'>Save Updates</MDBBtn> */}\r\n                                    <div className='text-right'>\r\n\r\n                                        <MDBBtn size='sm' className='px-2 font-weight-bold' color=\"secondary\" onClick={this.toggle}>Close</MDBBtn>\r\n                                        <MDBBtn size='sm' className='px-2 font-weight-bold' onClick={this.handleSubmit} outline color=\"primary\">Save updates</MDBBtn>\r\n                                    </div>\r\n                                </form>\r\n                            </MDBCardBody>\r\n                        </MDBCard>\r\n                        {/* {\r\n                                        this.state.notificationShow ?\r\n                                            <Notification\r\n                                                message={this.state.message}\r\n                                            /> : null\r\n                                    } */}\r\n\r\n\r\n                    </MDBModalBody>\r\n                    <MDBModalFooter>\r\n                    </MDBModalFooter>\r\n                </MDBModal>\r\n            </MDBContainer >\r\n        );\r\n    }\r\n}\r\n\r\nexport default EditOrderModal;"]},"metadata":{},"sourceType":"module"}