{"ast":null,"code":"import _defineProperty from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"d:\\\\mzamal\\\\sales&stock\\\\sales\\\\src\\\\components\\\\roles\\\\pages\\\\NewRole.jsx\";\nimport React, { Component } from 'react';\nimport { MDBContainer, MDBRow, MDBCol, MDBBtn, MDBInput, MDBCardBody, MDBCardHeader, MDBCard } from 'mdbreact';\nimport Notification from '../../misc/sections/Notification';\nimport { Can } from '../../../configs/Ability-context';\n\nvar NewUser =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewUser, _Component);\n\n  function NewUser() {\n    var _this;\n\n    _classCallCheck(this, NewUser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewUser).call(this));\n    _this._isMounted = false;\n\n    _this.handleInput = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var form = _this.refs.newRoleForm;\n\n      if (form.checkValidity() === false) {\n        form.classList.add('was-validated');\n      } else {\n        var name = _this.state.name;\n        var role = {\n          name: name\n        };\n        var options = {\n          method: 'POST',\n          body: JSON.stringify(role),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        };\n        fetch('/addNewRole', options).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          // console.log(json)\n          if (_this._isMounted === true) {\n            _this.setState({\n              message: json.message,\n              notificationShow: true\n            });\n          }\n\n          if (json.success === true) {\n            _this.setState({\n              name: ''\n            });\n          } else {\n            _this.name.focus();\n          }\n\n          if (_this._isMounted === true) {// setTimeout(() => this.setState({ notificationShow: false }), 1502);\n          }\n        })[\"catch\"](function (error) {\n          return console.log(error);\n        });\n      }\n    };\n\n    _this._isMounted = true;\n    _this.state = {\n      name: '',\n      message: '',\n      notificationShow: false\n    };\n    return _this;\n  }\n\n  _createClass(NewUser, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var name = this.state.name;\n      return React.createElement(Can, {\n        I: \"create\",\n        a: \"role\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(MDBContainer, {\n        className: \"\",\n        style: {\n          marginTop: '80px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(MDBRow, {\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(MDBCol, {\n        md: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(MDBCard, {\n        className: \" p-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(MDBCardHeader, {\n        tag: \"h4\",\n        style: {\n          color: 'teal'\n        },\n        className: \"text-center font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"New Role\"), React.createElement(MDBCardBody, {\n        className: \"p-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        ref: \"newRoleForm\",\n        onSubmit: this.handleSubmit,\n        noValidate: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"grey-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(MDBInput, {\n        onInput: this.handleInput,\n        value: this.state.name,\n        label: \"Name\",\n        name: \"name\",\n        icon: \"user\",\n        inputRef: function inputRef(el) {\n          _this2.name = el;\n        },\n        group: true,\n        type: \"text\",\n        validate: true,\n        error: \"wrong\",\n        success: \"right\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(MDBBtn, {\n        size: \"sm\",\n        color: \"teal\",\n        outline: true,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Create\"))))), this.state.notificationShow ? React.createElement(Notification, {\n        message: this.state.message,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }) : null))));\n    }\n  }]);\n\n  return NewUser;\n}(Component);\n\nexport default NewUser;","map":{"version":3,"sources":["d:\\mzamal\\sales&stock\\sales\\src\\components\\roles\\pages\\NewRole.jsx"],"names":["React","Component","MDBContainer","MDBRow","MDBCol","MDBBtn","MDBInput","MDBCardBody","MDBCardHeader","MDBCard","Notification","Can","NewUser","_isMounted","handleInput","e","setState","target","name","value","handleSubmit","preventDefault","form","refs","newRoleForm","checkValidity","classList","add","state","role","options","method","body","JSON","stringify","headers","fetch","then","res","json","message","notificationShow","success","focus","error","console","log","marginTop","color","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { MDBContainer, MDBRow, MDBCol, MDBBtn, MDBInput, MDBCardBody, MDBCardHeader, MDBCard } from 'mdbreact';\r\nimport Notification from '../../misc/sections/Notification';\r\nimport { Can } from '../../../configs/Ability-context'\r\n\r\n\r\n\r\nclass NewUser extends Component {\r\n    _isMounted = false\r\n    constructor() {\r\n        super();\r\n        this._isMounted = true\r\n        this.state = {\r\n            name: '',\r\n            message: '',\r\n            notificationShow: false\r\n        };\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false\r\n    }\r\n\r\n    handleInput = e => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        let form = this.refs.newRoleForm\r\n        if (form.checkValidity() === false) {\r\n            form.classList.add('was-validated');\r\n        }\r\n        else {\r\n            let name = this.state.name\r\n            let role = { name: name }\r\n\r\n            var options = {\r\n                method: 'POST',\r\n                body: JSON.stringify(role),\r\n                headers: { 'Content-Type': 'application/json' }\r\n            }\r\n            fetch('/addNewRole', options)\r\n                .then((res) => res.json())\r\n                .then((json) => {\r\n                    // console.log(json)\r\n                    if (this._isMounted === true) {\r\n                        this.setState({ message: json.message, notificationShow: true })\r\n                    }\r\n                    if (json.success === true) {\r\n\r\n                        this.setState({\r\n                            name: ''\r\n                        })\r\n                    }\r\n                    else {\r\n                        this.name.focus();\r\n                    }\r\n                    if (this._isMounted === true) {\r\n                        // setTimeout(() => this.setState({ notificationShow: false }), 1502);\r\n                    }\r\n                })\r\n                .catch((error) => console.log(error))\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        var { name } = this.state\r\n\r\n        return (\r\n            <Can I='create' a='role'>\r\n                <MDBContainer className='' style={{ marginTop: '80px' }}>\r\n                    <MDBRow center>\r\n                        <MDBCol md=\"6\">\r\n                            <MDBCard className=' p-5'>\r\n                                <MDBCardHeader tag=\"h4\" style={{ color: 'teal' }} className=\"text-center font-weight-bold\">\r\n                                    New Role\r\n                                </MDBCardHeader>\r\n                                <MDBCardBody className='p-2'>\r\n\r\n                                    <form ref='newRoleForm' onSubmit={this.handleSubmit} noValidate>\r\n                                        <div className=\"grey-text\">\r\n                                            <MDBInput\r\n                                                onInput={this.handleInput}\r\n                                                value={this.state.name}\r\n                                                label=\"Name\"\r\n                                                name='name'\r\n                                                icon=\"user\"\r\n                                                inputRef={el => { this.name = el }}\r\n                                                group\r\n                                                type=\"text\"\r\n                                                validate\r\n                                                error=\"wrong\"\r\n                                                success=\"right\"\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"text-center\">\r\n                                            <MDBBtn size='sm' color=\"teal\" outline type='submit'>Create</MDBBtn>\r\n                                        </div>\r\n                                    </form>\r\n                                </MDBCardBody>\r\n                            </MDBCard>\r\n                            {\r\n                                this.state.notificationShow ?\r\n                                    <Notification\r\n                                        message={this.state.message}\r\n                                    /> : null\r\n                            }\r\n                        </MDBCol>\r\n                    </MDBRow>\r\n                </MDBContainer>\r\n            </Can>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default NewUser"]},"metadata":{},"sourceType":"module"}