{"ast":null,"code":"var _jsxFileName = \"D:\\\\sales&stock\\\\sales\\\\src\\\\components\\\\pages\\\\NewOrder.jsx\";\nimport React from 'react';\nimport ProductsTable from './sections/ProductsTable';\nimport OrderDetails from './sections/OrderDetails';\nimport { MDBRow } from 'mdbreact';\n\nclass NewOrder extends React.Component {\n  constructor() {\n    super();\n\n    this.fetchOrderId = () => {\n      let currentComponent = this;\n      fetch('/getLastOrderID').then(res => res.json()).then(function (json) {\n        // console.log(json)\n        if (json.data.length !== 0) {\n          var lastOrderID = json.data.shift();\n          let id = lastOrderID.id;\n          currentComponent.setState({\n            orderId: id + 1,\n            showOrderDetails\n          });\n        } else {\n          currentComponent.setState({\n            orderId: 1\n          });\n        }\n      }).catch(error => console.log(error));\n    };\n\n    this.addProductToTbl = (pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked) => {\n      this.refs.productsTable.addProductToTbl(pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked);\n    };\n\n    this.deleteProduct = (price, i, pChecked) => {\n      this.refs.orderDetails.minusTotalValue(price);\n\n      if (pChecked === 'Yes') {\n        this.refs.orderDetails.minusTotalValueAdded(price);\n      }\n\n      let table = document.getElementById('productsTable');\n      table.deleteRow(i);\n\n      if (table.rows.length === 1) {\n        this.refs.productsTable.setState({\n          submitOrderBtn: false\n        });\n      }\n    };\n\n    this.checkOrderDetailsValidity = () => {\n      var orderDetailsValidity = this.refs.orderDetails.orderDetailsValidity();\n\n      if (!orderDetailsValidity) {\n        return false;\n      } else if (this.customerForm.checkValidity() === false) {\n        this.customerForm.classList.add('was-validated');\n        return false;\n      } else {\n        return true;\n      }\n    };\n\n    this.saveOrderDetailsToDB = (pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked) => {\n      let orderId = this.state.orderId; // let orderId = this.orderId.value;\n\n      let orderDetails = {\n        order_id: orderId,\n        pName: pName,\n        pSKU: pSKU,\n        pRate: pRate,\n        pQTY: pQTY,\n        pPrice: pPrice,\n        pRemarks: pRemarks,\n        pChecked: pChecked\n      };\n      var options = {\n        method: 'POST',\n        body: JSON.stringify(orderDetails),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      fetch('/addNewOrderDetails', options).then(res => res.json()).then(json => {// console.log(json)\n      }).catch(error => console.log(error)); // console.log(pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked)\n\n      this.refs.orderDetails.minusTotalValue(pPrice);\n\n      if (pChecked === 'Yes') {\n        this.refs.orderDetails.minusTotalValueAdded(pPrice);\n      }\n    };\n\n    this.saveOrderToDB = () => {\n      this.refs.orderDetails.saveOrderToDB();\n    };\n\n    this.refreshOrdersTable = () => {\n      window.location.reload();\n    };\n\n    this.minusFromTotal = pPrice => {\n      this.refs.orderDetails.minusTotalValue(pPrice);\n    };\n\n    this.addToTotal = pPrice => {\n      this.refs.orderDetails.addTotalValue(pPrice);\n    };\n\n    this.minusFromTotalValueAdded = pPrice => {\n      this.refs.orderDetails.minusTotalValueAdded(pPrice);\n    };\n\n    this.addToTotalValueAdded = pPrice => {\n      this.refs.orderDetails.addTotalValueAdded(pPrice);\n    };\n\n    this.state = {\n      orderId: 1\n    };\n    this.addProductToTbl = this.addProductToTbl.bind(this);\n    this.deleteProduct = this.deleteProduct.bind(this);\n    this.saveOrderDetailsToDB = this.saveOrderDetailsToDB.bind(this);\n    this.saveOrderToDB = this.saveOrderToDB.bind(this);\n    this.refreshOrdersTable = this.refreshOrdersTable.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchOrderId();\n  }\n\n  render() {\n    return React.createElement(MDBRow, {\n      style: {\n        marginTop: '78px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, this.state.showOrderDetails ? React.createElement(OrderDetails, {\n      ref: \"orderDetails\" // orderId={el => (this.orderId = el)}\n      ,\n      orderId: this.state.orderId,\n      orderForm: el => this.orderForm = el,\n      customerForm: el => this.customerForm = el,\n      addProductToTbl: this.addProductToTbl,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }) : null, React.createElement(MDBRow, {\n      center: true,\n      className: \"mt-3 mx-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(ProductsTable, {\n      ref: \"productsTable\",\n      refreshOrdersTable: this.refreshOrdersTable,\n      deleteProduct: this.deleteProduct,\n      saveOrderDetailsToDB: this.saveOrderDetailsToDB,\n      saveOrderToDB: this.saveOrderToDB,\n      checkOrderDetailsValidity: this.checkOrderDetailsValidity,\n      productsTable: el => this.productsTable = el,\n      minusFromTotal: this.minusFromTotal,\n      addToTotal: this.addToTotal,\n      minusFromTotalValueAdded: this.minusFromTotalValueAdded,\n      addToTotalValueAdded: this.addToTotalValueAdded,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default NewOrder;","map":{"version":3,"sources":["D:\\sales&stock\\sales\\src\\components\\pages\\NewOrder.jsx"],"names":["React","ProductsTable","OrderDetails","MDBRow","NewOrder","Component","constructor","fetchOrderId","currentComponent","fetch","then","res","json","data","length","lastOrderID","shift","id","setState","orderId","showOrderDetails","catch","error","console","log","addProductToTbl","pName","pSKU","pRate","pQTY","pPrice","pRemarks","pChecked","refs","productsTable","deleteProduct","price","i","orderDetails","minusTotalValue","minusTotalValueAdded","table","document","getElementById","deleteRow","rows","submitOrderBtn","checkOrderDetailsValidity","orderDetailsValidity","customerForm","checkValidity","classList","add","saveOrderDetailsToDB","state","order_id","options","method","body","JSON","stringify","headers","saveOrderToDB","refreshOrdersTable","window","location","reload","minusFromTotal","addToTotal","addTotalValue","minusFromTotalValueAdded","addToTotalValueAdded","addTotalValueAdded","bind","componentDidMount","render","marginTop","el","orderForm"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ProductsTable from './sections/ProductsTable';\nimport OrderDetails from './sections/OrderDetails';\nimport { MDBRow } from 'mdbreact';\n\n\nclass NewOrder extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      orderId: 1,\n    };\n    this.addProductToTbl = this.addProductToTbl.bind(this);\n    this.deleteProduct = this.deleteProduct.bind(this);\n    this.saveOrderDetailsToDB = this.saveOrderDetailsToDB.bind(this);\n    this.saveOrderToDB = this.saveOrderToDB.bind(this);\n    this.refreshOrdersTable = this.refreshOrdersTable.bind(this);\n  }\n  componentDidMount() {\n    this.fetchOrderId();\n  }\n  fetchOrderId = () => {\n    let currentComponent = this;\n    fetch('/getLastOrderID')\n      .then((res) => res.json())\n      .then(function (json) {\n        // console.log(json)\n        if (json.data.length !== 0) {\n          var lastOrderID = json.data.shift();\n          let id = lastOrderID.id;\n          currentComponent.setState({ orderId: id + 1,showOrderDetails })\n        }\n        else {\n          currentComponent.setState({ orderId: 1 })\n        }\n      })\n      .catch((error) => console.log(error));\n  }\n  addProductToTbl = (pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked) => {\n    this.refs.productsTable.addProductToTbl(pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked);\n  }\n\n  deleteProduct = (price, i, pChecked) => {\n\n    this.refs.orderDetails.minusTotalValue(price);\n    if (pChecked === 'Yes') {\n      this.refs.orderDetails.minusTotalValueAdded(price);\n    }\n    let table = document.getElementById('productsTable');\n    table.deleteRow(i);\n    if (table.rows.length === 1) {\n      this.refs.productsTable.setState({ submitOrderBtn: false })\n    }\n  }\n\n  checkOrderDetailsValidity = () => {\n    var orderDetailsValidity = this.refs.orderDetails.orderDetailsValidity();\n    if (!orderDetailsValidity) {\n      return false;\n    }\n    else if (this.customerForm.checkValidity() === false) {\n      this.customerForm.classList.add('was-validated');\n      return false;\n    }\n    else {\n      return true;\n    }\n\n  }\n\n  saveOrderDetailsToDB = (pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked) => {\n\n    let orderId = this.state.orderId;\n    // let orderId = this.orderId.value;\n    let orderDetails = { order_id: orderId, pName: pName, pSKU: pSKU, pRate: pRate, pQTY: pQTY, pPrice: pPrice, pRemarks: pRemarks, pChecked: pChecked }\n    var options = {\n      method: 'POST',\n      body: JSON.stringify(orderDetails),\n      headers: { 'Content-Type': 'application/json' }\n    }\n    fetch('/addNewOrderDetails', options)\n      .then((res) => res.json())\n      .then((json) => {\n        // console.log(json)\n      })\n      .catch((error) => console.log(error))\n    // console.log(pName, pSKU, pRate, pQTY, pPrice, pRemarks, pChecked)\n    this.refs.orderDetails.minusTotalValue(pPrice);\n    if (pChecked === 'Yes') {\n      this.refs.orderDetails.minusTotalValueAdded(pPrice);\n    }\n  }\n\n  saveOrderToDB = () => {\n    this.refs.orderDetails.saveOrderToDB();\n  }\n\n  refreshOrdersTable = () => {\n    window.location.reload();\n  }\n\n  minusFromTotal = (pPrice) => {\n    this.refs.orderDetails.minusTotalValue(pPrice)\n  }\n  addToTotal = (pPrice) => {\n    this.refs.orderDetails.addTotalValue(pPrice)\n  }\n  minusFromTotalValueAdded = (pPrice) => {\n    this.refs.orderDetails.minusTotalValueAdded(pPrice);\n  }\n  addToTotalValueAdded = (pPrice) => {\n    this.refs.orderDetails.addTotalValueAdded(pPrice);\n  }\n\n  render() {\n\n    return (\n      <MDBRow style={{ marginTop: '78px' }}>\n        {this.state.showOrderDetails ?\n          <OrderDetails\n            ref='orderDetails'\n            // orderId={el => (this.orderId = el)}\n            orderId={this.state.orderId}\n            orderForm={el => (this.orderForm = el)}\n            customerForm={el => (this.customerForm = el)}\n            addProductToTbl={this.addProductToTbl}\n          />\n          : null}\n        <MDBRow center className='mt-3 mx-auto'>\n          <ProductsTable\n            ref='productsTable'\n            refreshOrdersTable={this.refreshOrdersTable}\n            deleteProduct={this.deleteProduct}\n            saveOrderDetailsToDB={this.saveOrderDetailsToDB}\n            saveOrderToDB={this.saveOrderToDB}\n            checkOrderDetailsValidity={this.checkOrderDetailsValidity}\n            productsTable={el => (this.productsTable = el)}\n            minusFromTotal={this.minusFromTotal}\n            addToTotal={this.addToTotal}\n            minusFromTotalValueAdded={this.minusFromTotalValueAdded}\n            addToTotalValueAdded={this.addToTotalValueAdded}\n          />\n        </MDBRow>\n      </MDBRow>\n    );\n  }\n}\n\nexport default NewOrder;"]},"metadata":{},"sourceType":"module"}